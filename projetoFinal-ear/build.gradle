apply plugin: 'ear'

dependencies {
    deploy project(path: ':projetoFinal-war', configuration: 'archives')
    deploy project(path: ':projetoFinal-ejb', configuration: 'archives')
    earlib project(':projetoFinal-api')
    earlib project(':projetoFinal-impl')
    earlib project(':projetoFinal-ejb-client')
}

ear {
    deploymentDescriptor {
        def warName = project(':projetoFinal-war').name
        def warVersion = project(':projetoFinal-war').version
        def warFileName = warName + '-' + warVersion + '.war'
        webModule(warFileName, 'dm110')

        def ejbName = project(':projetoFinal-ejb').name
        def ejbVersion = project(':projetoFinal-ejb').version
        def ejbFileName = ejbName + '-' + ejbVersion + '.jar'
        module(ejbFileName, 'ejb')
    }
}